
@page "/tables/table-test"
@using System.IO;
@using System.Net.Http.Json;
@using Newtonsoft.Json;
@inject IJSRuntime JSRuntime;
@inject HttpClient Http;

<style>tr:hover {background-color:#a6adad !important;}</style>

<div class="container-fluid;background-color:whiteSmoke;">

    <label style="float:left;"> Record Id: @id</label>

    @if (sampleData == null)
    {
        <p><em>Loading...</em></p>
    }
    else
    {
        <table id="tabletest" class="table" style="font-size:13px;">
            <thead>
                <tr>
                    <th style="display:none;"> RecordID </th>
                    <th> OrderID </th>
                    <th> Country </th>
                    <th style="display:none;"> ShipCountry </th>
                    <th> ShipCity </th>
                    <th> ShipName </th>
                    <th> ShipAddress </th>
                    <th> CompanyEmail </th>
                    <th> CompanyAgent </th>
                    <th> CompanyName </th>
                    <th style="display:none;"> Currency </th>
                    <th style="display:none;"> Notes</th>
                    <th> Department </th>
                    <th> Website </th>
                    <th style="display:none;"> Latitude </th>
                    <th style="display:none;"> Longitude </th>
                    <th> ShipDate </th>
                    <th> PaymentDate </th>
                    <th style="display:none;"> TimeZone </th>
                    <th> TotalPayment </th>
                    <th style="display:none;"> Gender </th>
                    <th style="display:none;"> Status </th>
                    <th style="display:none;"> Type </th>
                    <th> Actions </th>
                </tr>
            </thead>
            <tbody>
                @{ var color = string.Empty;
                    var n = 1;}
                @foreach (var x in sampleData)
                {
                  @*  if (n % 2 == 0)
                        color = "#b6fada";
                    else
                        color = "#89d8f1";
                    <tr style="background-color:@color;">*@
                    <tr>
                        <td style="display:none;"> @x.RecordID </td>
                        <td style="font-size:10px;"> @x.OrderID </td>
                        <td> @x.Country </td>
                        <td style="display:none;"> @x.ShipCountry </td>
                        <td> @x.ShipCity </td>
                        <td> @x.ShipName </td>
                        <td> @x.ShipAddress </td>
                        <td> @x.CompanyEmail </td>
                        <td> @x.CompanyAgent </td>
                        <td> @x.CompanyName </td>
                        <td style="display:none;"> @x.Currency </td>
                        <td style="display:none;"> @x.Notes</td>
                        <td> @x.Department </td>
                        <td> @x.Website </td>
                        <td style="display:none;"> @x.Latitude </td>
                        <td style="display:none;"> @x.Longitude </td>
                        <td> @x.ShipDate </td>
                        <td> @x.PaymentDate.Substring(0, 10)</td>
                        <td style="display:none;"> @x.TimeZone </td>
                        <td> @x.TotalPayment </td>
                        <td style="display:none;"> @x.Gender </td>
                        <td style="display:none;"> @x.Status </td>
                        <td style="display:none;"> @x.Type </td>
                        <td>  <button class="btn btn-info" @onclick="@((ui) => RecordId(Convert.ToInt32(@x.RecordID)))"> Id </button></td>
                    </tr>
                    n++;
                }
            </tbody>
        </table>
    }

        </div>


        @code {

            private IList<SampleData> sampleData = new List<SampleData>();
            private string lines = string.Empty;
            private int id = 0;

            protected override async Task OnInitializedAsync()
            {
                lines = File.ReadAllText("wwwroot/sample-data/data.json");
                sampleData = JsonConvert.DeserializeObject<List<SampleData>>(lines);
                await JSRuntime.InvokeAsync<object>("initializeDataTable", "#tabletest");
            }

            public void RecordId(int _id)
            {
                id = _id;
            }

            public class SampleData
            {
                public int? RecordID { get; set; }
                public string? OrderID { get; set; }
                public string? Country { get; set; }
                public string? ShipCountry { get; set; }
                public string? ShipCity { get; set; }
                public string? ShipName { get; set; }
                public string? ShipAddress { get; set; }
                public string? CompanyEmail { get; set; }
                public string? CompanyAgent { get; set; }
                public string? CompanyName { get; set; }
                public string? Currency { get; set; }
                public string? Notes { get; set; }
                public string? Department { get; set; }
                public string? Website { get; set; }
                public string? Latitude { get; set; }
                public string? Longitude { get; set; }
                public string? ShipDate { get; set; }
                public string? PaymentDate { get; set; }
                public string? TimeZone { get; set; }
                public string? TotalPayment { get; set; }
                public string? Gender { get; set; }
                public string? Status { get; set; }
                public string? Type { get; set; }
                public string? Actions { get; set; }
            }


        }





